<div class="container">
  <header>
    <h1>{{ siteName }}</h1>
    <p class="subtitle">This site hosts a few of my web compatible projects.</p>
  </header>

  <main class="projects">
    @for (project of projects; track project.title; let projectIdx = $index) {
      <article class="project-card">
        <h2 class="project-title">
          @if (project.link) {
            <a [href]="project.link" target="_blank" rel="noopener noreferrer">
              {{ project.title }}
              <svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
                <polyline points="15 3 21 3 21 9"></polyline>
                <line x1="10" y1="14" x2="21" y2="3"></line>
              </svg>
            </a>
          } @else {
            {{ project.title }}
          }
        </h2>
        <div class="project-description" [innerHTML]="project.safeDescription"></div>
        @if (project.safeHtmlTags && project.safeHtmlTags.length > 0) {
          <div class="html-tags-wrapper">
            @if (project.safeHtmlTags.length > 1) {
              <button
                class="nav-arrow nav-arrow-left"
                (click)="scrollTags('left', projectIdx)"
                [id]="'arrow-left-' + projectIdx"
                aria-label="Previous">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <polyline points="15 18 9 12 15 6"></polyline>
                </svg>
              </button>
            }
            <div class="html-tags-container" [id]="'tags-container-' + projectIdx">
              @for (tag of project.safeHtmlTags; track $index; let tagIdx = $index) {
                <div class="html-tag-item">
                  @if (isIframe(project.htmlTags![tagIdx]) && !isIframeLoaded(projectIdx, tagIdx)) {
                    <div class="iframe-placeholder" (click)="loadIframe(projectIdx, tagIdx)">
                      <div class="play-button">
                        <img src="arrow.svg" alt="Load" width="64" height="64">
                      </div>
                      <div class="placeholder-text">Click to load content</div>
                    </div>
                  } @else {
                    <div [innerHTML]="tag"></div>
                  }
                </div>
              }
            </div>
            @if (project.safeHtmlTags.length > 1) {
              <button
                class="nav-arrow nav-arrow-right"
                (click)="scrollTags('right', projectIdx)"
                [id]="'arrow-right-' + projectIdx"
                aria-label="Next">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <polyline points="9 18 15 12 9 6"></polyline>
                </svg>
              </button>
            }
    </div>
        }
      </article>
    }
</main>

  <footer>
    <p>Questions? Comments? Feedback? Email me at <a href="mailto:jackneeleman981@gmail.com">jackneeleman981@gmail.com</a></p>
  </footer>
</div>

<router-outlet />
